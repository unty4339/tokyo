戦闘関係の仕様

BattleStateクラス
- enumクラス
- 戦闘状態を表す
- NotStarted、InProgress、PlayerWon、PlayerLostの値を持つ

Teamクラス
- Monobehaviorを継承しない
- チーム（モンスターの集合）について責任を持つ
- Monsterインスタンスのリストを保持（最大3体）
- 全滅判定を行うIsDefeatedメソッドを持つ
- 戦闘可能なモンスターを取得するGetActiveMonstersメソッドを持つ

Battleクラス
- Monobehaviorを継承しない
- 戦闘の進行管理について責任を持つ
- Teamインスタンスを2つ保持（PlayerTeamとEnemyTeam）
- 行動順序を示すMonsterインスタンスのリストを保持（素早さ順）
- 現在のターン数をintで保持
- 戦闘状態をBattleStateで保持
- 戦闘開始時の初期化を行うInitializeメソッドを持つ
- 行動順序を計算するCalculateActionOrderメソッドを持つ（素早さ順、同速の場合はランダム）
- ターンを実行するExecuteTurnメソッドを持つ
- 技を使用するUseSkillメソッドを持つ
- ダメージを計算するCalculateDamageメソッドを持つ
- 勝敗判定を行うCheckBattleEndメソッドを持つ
- 戦闘結果を取得するGetBattleResultメソッドを持つ
- 10ターン制限をチェックするCheckTurnLimitメソッドを持つ

BattleResultクラス
- Monobehaviorを継承しない
- 戦闘結果について責任を持つ
- 勝敗結果をBattleStateで保持
- プレイヤーチームの残HPをDictionary<Monster, int>で保持（モンスター別）
- 敵チームの残HPをDictionary<Monster, int>で保持（モンスター別）
- 終了時のターン数をintで保持

BattleIncidentStateクラス
- IncidentStateのサブクラス
- 戦闘を表す特別なインシデント状態について責任を持つ
- Teamインスタンスを2つ保持（PlayerTeamとEnemyTeam）
- 戦闘結果をBattleResultで保持
- 戦闘が開始されたかどうかをboolで保持
- 戦闘が終了したかどうかをboolで保持（Resultがnullでないかで判定）
- 戦闘結果に基づく次の状態を作成する関数をFunc<BattleResult, IncidentState>で保持
- 戦闘を開始するStartBattleメソッドを持つ
- 戦闘結果を設定するSetBattleResultメソッドを持つ
- IncidentContentを作成するCreateContentメソッドを持つ（IncidentContentFactory.CreateBattleContentを使用）
- TranslateメソッドはBattleResultActionインスタンスを受け取り、別のIncidentStateインスタンスかnullを返す
    - 受け取るIncidentActionインスタンスがnullのときは時間切れを意味する
    - BattleResultActionの場合はOnBattleEndTransitionに基づいて次状態を返す
    - 戻り値としてnullへの遷移は終端状態（終了）を示す

BattleResultActionクラス
- IncidentActionのサブクラス
- 戦闘の勝敗を示すIncidentActionについて責任を持つ
- BattleResultインスタンスを保持
- 等価判定とハッシュコードの計算でBattleResultも考慮する

BattleUIクラス
- Monobehaviorを継承する
- 戦闘画面のUI制御について責任を持つ
- Battleインスタンスを保持
- 戦闘を開始するStartBattleメソッドを持つ（Teamを2つ受け取り、Battleインスタンスを作成してInitialize）
- 戦闘シーケンスを実行するExecuteBattleSequenceメソッドを持つ（コルーチン）
- ターンをログ出力付きで実行するExecuteTurnWithLogsメソッドを持つ（コルーチン）
- ターンをアニメーション付きで実行するExecuteTurnWithAnimationメソッドを持つ（コルーチン）
- UIを更新するUpdateUIメソッドを持つ
- モンスター表示を更新するUpdateMonsterDisplaysメソッドを持つ
- ログを追加するAddLogメソッドを持つ
- 戦闘をスキップするSkipBattleメソッドを持つ
- ウィンドウを閉じるCloseWindowメソッドを持つ

BattleTestControllerクラス
- Monobehaviorを継承する
- 戦闘テスト用のコントローラーについて責任を持つ
- BattleUIインスタンスを参照
- テストボタンクリック時にテスト戦闘を開始するOnTestButtonClickメソッドを持つ

IncidentContentFactoryクラス（戦闘関連部分のみ）
- 静的クラス
- 戦闘用IncidentContentを作成するCreateBattleContentメソッドを持つ
    - BattleIncidentStateを受け取り、IncidentOptionalContentインスタンスを作成
    - TypeをIncidentContentType.Battleに設定

処理シーケンス
1. 別クラスでBattleIncidentStateインスタンスを作成（PlayerTeamとEnemyTeamを設定）
2. IncidentManagerインスタンスに登録
3. IncidentManagerはBattleIncidentStateからIncidentContentを作成（IncidentContentFactory.CreateBattleContentを使用）
4. IncidentWindowでウィンドウを作成し、IncidentContentを渡す
5. IncidentContentのTypeがBattleの場合、BattleUIを取得して戦闘を開始
6. BattleIncidentState.StartBattleが呼ばれ、BattleUI.StartBattleを呼び出す
7. BattleUI.StartBattleがBattleインスタンスを作成してInitialize
8. BattleUI.ExecuteBattleSequenceがコルーチンとして実行され、Battle.ExecuteTurnが繰り返し呼ばれる
9. 各ターンでモンスターが行動し、勝敗判定が行われる
10. 勝敗が決まるとBattleResultが作成され、BattleIncidentState.SetBattleResultで設定
11. BattleResultActionが作成され、IncidentManagerに渡される
12. BattleIncidentState.Translateが呼ばれ、OnBattleEndTransitionに基づいて次状態に遷移
13. 次状態がnullの場合はインシデント終了
