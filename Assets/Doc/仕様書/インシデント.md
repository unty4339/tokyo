インシデント関係の仕様

IncidentStateクラス
- Monobehaviorを継承しない
- 抽象クラスと多数のサブクラスを持つ
- 現在のインシデントの状況・状態について責任を持つ
- stringのフィールドを持つ（状態の名称）
- 現在の状態が即時の解決が必要か後回しにできるかも格納する（enumで）
    - 外部から参照する際はIsImmediatelyメソッドで判定させる
- 後回しにできる場合、何週で期限切れになるかの値を設定する
- IncidentContentを作成する機能を持つ
- TranslateメソッドはIncidentActionインスタンスを受け取り、別のIncidentStateインスタンスかnullを返す
    - 受け取るIncidentActionインスタンスがnullのときは時間切れを意味する
    - 戻り値としてnullへの遷移は終端状態（終了）を示す

IncidentActionクラス
- Monobehaviorを継承しない
- 抽象クラスと多数のサブクラスを持つ
- あるIncidentStateに対してプレイヤーが選択した結果などを表す
- サブクラス1 stringのidだけ持っているクラス
    - 判定に使うので簡易な等価判定が要る。id代わりの文字列を比較するなど
- サブクラス2 戦闘の勝敗を示すクラス

IncidentIconクラス
- 画面に置くインシデントの状況を示すアイコンの管理を行う
- 現在のインシデント状態が即時の解決が必要か後回しにできるかで見た目が変わる
- インシデントが解決されると削除される

IncidentWindowクラス
- ウィンドウの開閉やサイズの変更、ウィンドウオブジェクトの削除の責任を持つ
- IncidentContentを受け取る

IncidentContentクラス
- ウィンドウの子になるオブジェクトについて責任を持つ
- 自身の子オブジェクト（画面に配置するボタン等）を一括で作成する機能を持つ
- 自身を作成したIncidentProcessにIncidentActionクラスを作成して渡す機能を持つ
- コンストラクタでパラメータを持ち、Buildメソッドでゲームオブジェクトを作成する機能を持つ

IncidentManagerクラス
- 現在有効な全てのIncidentProcessクラスを管理する機能を持つ
- シングルトン
- IncidentStateインスタンスを保持している
- IncidentStateインスタンスを登録するRegisterメソッド
- あるIncidentStateインスタンスのチェーンが始まってから何週経過しているかを格納する
- インシデントの登録と解除とアイコン作成を担当
- ひとつでも即時解決が必要なインシデントがあるかどうかを判定できる

GlobalIncidentRegisterクラス
- 時間を読み取り、特定の年・月・週に応じたインシデントを作成してIncidentManagerインスタンスに登録する
- シングルトン

（その他）
- 外部からもインシデントを作成してIncidentManagerインスタンスに登録できる
    探索系インシデントなどは探索系のクラスから向こうの条件分岐で登録する

処理シーケンス
1. 別クラスでIncidentStateインスタンスを作成
2. IncidentManagerインスタンスに登録
3. IncidentManagerインスタンスはIncidentStateインスタンスを元にIncidentIconインスタンスを作成し参照保持
4. 対応するアイコンのクリックまたはインシデント発生時設定によって特定インシデントのウィンドウ作成を決める
5. 保持しているIncidentStateインスタンスからIncidentContentインスタンスを受け取る
6. IncidentWindowクラスでウィンドウを作成する
    作成したIncidentWindowインスタンスにIncidentContentインスタンスを渡す
7. IncidentContentインスタンスがBuildするとIncidentWindowインスタンスのオブジェクトの子としてコンテンツを作成する
8. ビルドしたUI要素が操作（ボタンクリック等）されるとIncidentContentインスタンスからIncidentManagerインスタンスに対してIncidentActionインスタンスを渡す
9. IncidentManagerインスタンスは今のIncidentStateインスタンスに渡されたIncidentActionインスタンスを渡す。返ってきた次状態IncidentStateインスタンスを受け取る
10. 次状態がnullである場合はIncidentStateインスタンスの登録を解除しウィンドウと対応するアイコンも削除する
11. 次状態がnullでない場合は、そのIncidentStateインスタンスで更新しアイコンを更新する　また5に戻る